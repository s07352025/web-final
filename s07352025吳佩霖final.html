<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    
    <title>期末專案</title>
    
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"></link>
    <link rel="stylesheet" href="my.css" />
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<div class="container">


<div class="col-12 col-md-18 ">
<div class="navbar navbar-fixed-top navbar-custom ">

<nav class="navbar navbar-expand-md navbar-dark bg-green p-sm-0 m-sm-0"> 
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        
        <span class="icon-bar"></span>
      </button>  
      <div class="container" >
      <a class="navbar-brand" title="屁屁偵探特展" href="https://pier2.org/exhibition/info/957/">
        <span class="navbar-logo" style="color: rgb(223, 240, 236);"><img src="https://i.imgur.com/syaN2lM.png"style="position:relative;right:0px; top: -30px;width:120px;height:150px;"><font size="4"><b>奇奇記帳</b></font></span></a>
     </div> 
    
     <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
     </form>    
        
    </div><div class="top">
    <ul class="navbar-nav mr-auto">
      <div class="nav-item">
    
      <li class="nav-item dropdown"><a class="nav-link" href="#"><font color="white"> &nbsp;關於我&nbsp; </font>/</a>
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><font color="white"> 照片集 </font></a>
  
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="https://imgur.com/a/vBxVDRq">&nbsp;&nbsp;&nbsp;阿奇寫真&nbsp;/</a>
          <a class="dropdown-item" href="https://youtube.com/shorts/wSwIiLhdKhI?feature=share">阿奇影片</a>
        </div>
      </li></div>
    </ul></div>>
</div></div></nav>


<body>
  <div class="down">
  <div class="col-6 col-md-4">
  <div id="myCarousel" class="carousel slide">
    
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
      <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>   
   
    <div class="carousel-inner">
      <div class="item active">
        <img src="https://i.imgur.com/e2D360I.jpg" alt="First slide">
        <div class="carousel-caption">巨貓1</div>
      </div>
      <div class="item">
        <img src="https://i.imgur.com/kc0wRkj.jpg" alt="Second slide">
        <div class="carousel-caption">巨貓2</div>
      </div>
      <div class="item">
        <img src="https://i.imgur.com/kQ48dy9.jpg" alt="Third slide">
        <div class="carousel-caption">巨貓3</div>
      </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    
  </div>  </div>  </div>
<div class="col-6 col-md-4">   
<table class="table table-bordered" id="para_table"> 
    <tr> 
     <th style="text-align:center" width="200">類型</th> 
     <th style="text-align:center" width="200">名稱</th> 
     <th style="text-align:center" width="200">金額</th> 
     <th style="text-align:center" width="100">操作</th> 
    </tr> 
    <tr> 
        <td style="text-align:center; " onclick="tdclick1(this)"><label>
            <input list="consutype" name="類型"></label></td>
            <datalist id="consutype">
              <option value="飲食">
              <option value="衣物">
              <option value="教育">
              <option value="日用品">
              <option value="其他">
            </datalist>
            </div>  
  
     <td style="text-align:center; " onclick="tdclick(this)"></td> 
     <td style="text-align:center; " onclick="tdclick(this)"></td> 
     <td style="text-align:center; " onclick="deletetr(this)"> 
     <button type="button" class="btn btn-xs btn-link"  >刪除</button> 
     </td> 
    </tr> 
   </table> 
    
   <div id="addtrdiv" style="margin-top:-15px; width: 15%; float: right;"> 
    <button type="button" class="btn btn-xs btn-link" onclick="addtr()"><img src="https://cdn-icons-png.flaticon.com/512/1581/1581594.png"style="position:relative;right:0px; top: 0px;width:40px;height:40px;">&nbsp;</button> 
   </div> </div>
  

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
 $(document).ready(() => {
  $('.carousel').carousel({
     interval: 10
  })})    
 
function gettableinfo(){ 
  
 var key = ""; 
 var value = ""; 
 var tabledata = ""; 
 var table = $("#para_table"); 
 var tbody = table.children(); 
 var trs = tbody.children(); 
 for(var i=1;i<trs.length;i++){ 
  var tds = trs.eq(i).children(); 
  for(var j=0;j<tds.length;j++){ 
   if(j==0){ 
    if(tds.eq(j).text()==null||tds.eq(j).text()==""){ 
     return null; 
    } 
    key = "key\":\""+tds.eq(j).text(); 
   } 
   if(j==1){ 
    if(tds.eq(j).text()==null||tds.eq(j).text()==""){ 
     return null; 
    } 
    value = "value\":\""+tds.eq(j).text(); 
   } 
  } 
  if(i==trs.length-1){ 
   tabledata += "{\""+key+"\",\""+value+"\"}"; 
  }else{ 
   tabledata += "{\""+key+"\",\""+value+"\"},"; 
  } 
 } 
 tabledata = "["+tabledata+"]"; 
 return tabledata; 
} 
function tdclick1(tdobject){ 
    
    $("#consutype").bind("select", function() {
    if ($('#consutype').find('option').length) {
      if ($('option[value=' + this.value + ']').length > 0) {
        $("#consutype").val($('option[value=' + this.value + ']').data("text"));
      }
    }
  })


  $(document).ready(function() {
    var counter = 2;

    $("#addtr()").on("click", function() {

      counter = $('#para_table').length - 2;

      var newRow = $("<tr>");
      var cols = "";

      cols += '<td><input list="consutype" class="form-control" id="consutype'+counter+'" name="animal"><datalist id="consutype"><option data-text="cat" value="1">Text 1</option><option data-text="dog" value="2">Text 2</option><option data-text="fish" value="3">Text 3</option></datalist></td>';


     
      newRow.append(cols);
      $("table.order-list").append(newRow);

      $("#consutype" + counter).bind("select", function() {
        if ($('#consutype').find('option').length) {
          if ($('option[value=' + this.value + ']').length > 0) {
            $("#consutype" + counter).val($('option[value=' + this.value + ']').data("text"));
          }
        }
      })

      counter++;
    });



    
    });
}
function tdclick(tdobject){ 
    
 var td=$(tdobject); 
 td.attr("onclick", ""); 

 var text=td.text(); 

 td.html("");


 var input=$("<input>"); 
 
 input.attr("value",text); 
 input.bind("blur",function(){ 
  var inputnode=$(this); 
  var inputtext=inputnode.val(); 
  var tdNode=inputnode.parent(); 
  tdNode.html(inputtext); 
  tdNode.click(tdclick); 
  td.attr("onclick", "tdclick(this)"); 
 }); 
 
 input.keyup(function(event){ 
  var myEvent =event||window.event; 
  var kcode=myEvent.keyCode; 
  if(kcode==13){ 
   var inputnode=$(this); 
   var inputtext=inputnode.val(); 
   var tdNode=inputnode.parent(); 
   tdNode.html(inputtext); 
   tdNode.click(tdclick); 
  } 
  
 }); 


 td.append (input);
 
 var t =input.val(); 
 input.val("").focus().val(t); 


//    input.focus(); 
 

 td.unbind("click"); 
} 
function addtr(){ 
 var table = $("#para_table"); 
 var tr= $("<tr>" + 
  "<td onclick='tdclick(this)'>"+"</td>" + 
  "<td onclick='tdclick(this)'>"+"</td>" + 
  "<td onclick='tdclick(this)'>"+"</td>" + 
  "<td align='center' onclick='deletetr(this)'><button type='button' class='btn btn-xs btn-link' >"+"刪除"+"</button></td></tr>"); 
 table.append(tr); 
} 
function deletetr(tdobject){ 
 var td=$(tdobject); 
 td.parents("tr").remove(); 
} 


</script>
</body></div>
</html>
